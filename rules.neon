services:
    -
        class: ShipMonk\PHPStan\DeadCode\Provider\VendorEntrypointProvider
        tags:
            - shipmonk.deadCode.entrypointProvider
        arguments:
            enabled: %deadCode.entrypoints.vendor.enabled%

    -
        class: ShipMonk\PHPStan\DeadCode\Provider\PhpUnitEntrypointProvider
        tags:
            - shipmonk.deadCode.entrypointProvider
        arguments:
            enabled: %deadCode.entrypoints.phpunit.enabled%

    -
        class: ShipMonk\PHPStan\DeadCode\Provider\SymfonyEntrypointProvider
        tags:
            - shipmonk.deadCode.entrypointProvider
        arguments:
            enabled: %deadCode.entrypoints.symfony.enabled%

    -
        class: ShipMonk\PHPStan\DeadCode\Collector\MethodCallCollector
        tags:
            - phpstan.collector

    -
        class: ShipMonk\PHPStan\DeadCode\Collector\MethodDefinitionCollector
        arguments:
            entrypointProviders: tagged(shipmonk.deadCode.entrypointProvider)
        tags:
            - phpstan.collector

    -
        class: ShipMonk\PHPStan\DeadCode\Rule\DeadMethodRule
        tags:
            - phpstan.rules.rule


parameters:
    deadCode:
        entrypoints:
            vendor:
                enabled: true
            phpunit:
                enabled: false
            symfony:
                enabled: false

parametersSchema:
    deadCode: structure([
        entrypoints: structure([
            vendor: structure([
                enabled: bool()
            ])
            phpunit: structure([
                enabled: bool()
            ])
            symfony: structure([
                enabled: bool()
            ])
        ])
    ])
